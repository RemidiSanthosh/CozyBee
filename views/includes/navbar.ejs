<style>
.search-btn{
  background-color:#EEB547;
  color:#fff;
  border-radius:25px;
  padding:0 1rem;
  display:flex;
  align-items:center;
}
.search-btn:hover{
  background-color:#EEB547;
  color:#fff;
}
.search-btn i{
  margin-right: .5rem;
}

.search-input{
  border-radius:25px;
  padding:0.5rem 2rem;
  min-width:260px;
}

/* Tax toggle */
.tax-toggle{
  border:1px solid #ccc;
  border-radius:1.5rem;
  padding:0.35rem 0.9rem;
  margin-right:10px;
  white-space:nowrap;
  display:flex;
  align-items:center;
}
</style>

<nav class="navbar navbar-expand-md bg-body-light border-bottom sticky-top">
<div class="container-fluid">

  <!-- LEFT -->
  <a class="navbar-brand d-flex align-items-center" href="/listings">
    <img src="/images/logo.png"
         width="35"
         class="me-2 rounded-circle">
    CozyBee
  </a>

  <button class="navbar-toggler" type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">

    <!-- LEFT LINKS -->
    <div class="navbar-nav me-3">
      <a class="nav-link" href="/listings">Explore</a>
    </div>

    <!-- CENTER SEARCH -->
    <form class="d-flex mx-auto  me-3"
          role="search"
          action="/listings"
          method="GET">

      <input class="form-control me-2 search-input"
             type="search"
             name="q"
             placeholder="Search destinations"
             value="<%= typeof q !== 'undefined' ? q : '' %>">

      <button class="btn search-btn" type="submit">
        <i class="fa-solid fa-magnifying-glass"></i>Search
      </button>
    </form>

    <!-- RIGHT SIDE -->
    <div class="navbar-nav ms-auto align-items-center">

      <!-- TAX TOGGLE -->
      <div class="tax-toggle me-2">
        <div class="form-check form-switch m-0">
          <input class="form-check-input"
                 type="checkbox"
                 id="switchCheckDefault">
          <label class="form-check-label ms-2"
                 for="switchCheckDefault">
            After taxes
          </label>
        </div>
      </div>

      <a class="nav-link" href="/listings/new">
        Airbnb your home
      </a>

      <% if(!currUser) { %>
        <a class="nav-link" href="/signup"><b>Sign up</b></a>
        <a class="nav-link" href="/login"><b>Log in</b></a>
      <% } else { %>
        <a class="nav-link" href="/logout"><b>Log out</b></a>
      <% } %>

    </div>

  </div>
</div>
</nav>

<script>
const taxSwitch = document.getElementById("switchCheckDefault");

if (taxSwitch) {
  taxSwitch.addEventListener("change", () => {
    let taxInfo = document.getElementsByClassName("tax-info");

    for (let info of taxInfo) {
      info.style.display =
        info.style.display === "inline"
          ? "none"
          : "inline";
    }
  });
}
</script>
